<!DOCTYPE html><html lang="pt-BR"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Configurações da Conta - Admin</title><script src="https://cdn.tailwindcss.com"></script><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"><script src="https://unpkg.com/@phosphor-icons/web"></script><style> body { font-family: 'Inter', sans-serif; background-color: #f9fafb; } :root { --brand-primary: #36208a; } </style></head><body><div class="container mx-auto max-w-2xl p-4 sm:p-6 lg:p-8"><header class="flex justify-between items-center pb-6 border-b border-gray-200 mb-6"><div class="flex items-center space-x-3"><i class="ph-bold ph-user-gear text-3xl" style="color: var(--brand-primary);"></i><h1 class="text-2xl sm:text-3xl font-bold text-gray-900">Configurações da Conta</h1></div><a href="admin.html" class="font-semibold flex items-center space-x-2" style="color: var(--brand-primary);"><i class="ph-bold ph-arrow-left"></i><span>Voltar ao Painel</span></a></header><main class="bg-white p-8 rounded-lg shadow-md"><form id="admin-creds-form" class="space-y-4"><p class="text-sm text-gray-600">Para alterar sua senha, confirme a senha antiga e digite a nova.</p><div><label for="current-admin-password" class="block text-sm font-medium text-gray-700">Senha Atual</label><input type="password" id="current-admin-password" required class="mt-1 w-full p-2 border border-gray-300 rounded-md"></div><div class="border-t pt-4"></div><div><label for="new-admin-password" class="block text-sm font-medium text-gray-700">Nova Senha</label><input type="password" id="new-admin-password" required class="mt-1 w-full p-2 border border-gray-300 rounded-md"></div><div><label for="confirm-admin-password" class="block text-sm font-medium text-gray-700">Confirmar Nova Senha</label><input type="password" id="confirm-admin-password" required class="mt-1 w-full p-2 border border-gray-300 rounded-md"></div><button type="submit" class="w-full text-white font-bold py-2 px-4 rounded-lg" style="background-color: var(--brand-primary);">Salvar Nova Senha</button></form><p id="creds-feedback" class="text-sm text-center mt-4"></p></main></div><script type="module">import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";import { getAuth, onAuthStateChanged, reauthenticateWithCredential, EmailAuthProvider, updatePassword } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";const firebaseConfig = {apiKey: "AIzaSyDqZ3USsiJvToYb60cJHyNonyLR_8KJ92g",authDomain: "gp7-compra-funcionario.firebaseapp.com",projectId: "gp7-compra-funcionario",storageBucket: "gp7-compra-funcionario.appspot.com",messagingSenderId: "1077010915354",appId: "1:1077010915354:web:f571a10974fd46cf3471a3",measurementId: "G-VFSLE17G9Z"};const app = initializeApp(firebaseConfig);const auth = getAuth(app);document.addEventListener('DOMContentLoaded', () => { onAuthStateChanged(auth, user => { if (!user || sessionStorage.getItem('isAdminLoggedIn') !== 'true') { window.location.href = 'admin-login.html'; } }); const form = document.getElementById('admin-creds-form'); const currentPasswordInput = document.getElementById('current-admin-password'); const newPasswordInput = document.getElementById('new-admin-password'); const confirmPasswordInput = document.getElementById('confirm-admin-password'); const feedbackEl = document.getElementById('creds-feedback'); form.addEventListener('submit', async (e) => { e.preventDefault(); feedbackEl.textContent = ''; feedbackEl.className = 'text-sm text-center mt-4'; const user = auth.currentUser; if (!user) return; if (newPasswordInput.value !== confirmPasswordInput.value) { feedbackEl.textContent = 'As novas senhas não coincidem.'; feedbackEl.classList.add('text-red-600'); return; } const credential = EmailAuthProvider.credential(user.email, currentPasswordInput.value); try { await reauthenticateWithCredential(user, credential); await updatePassword(user, newPasswordInput.value); feedbackEl.textContent = 'Senha atualizada com sucesso!'; feedbackEl.classList.add('text-green-600'); form.reset(); } catch (error) { feedbackEl.textContent = 'Senha atual incorreta ou erro ao atualizar.'; feedbackEl.classList.add('text-red-600'); console.error('Erro de reautenticação ou atualização:', error); } }); });</script></body></html>